(this["webpackJsonpreact_redux-list-of-todos"]=this["webpackJsonpreact_redux-list-of-todos"]||[]).push([[0],{35:function(e,t,n){},36:function(e,t,n){},37:function(e,t,n){},64:function(e,t,n){},65:function(e,t,n){"use strict";n.r(t);var r,c=n(10),a=n.n(c),s=n(4),o=n(0),u=(n(35),n(36),n(37),n(14)),l=n.n(u),i=n(7),d=n(25),O=n(26),j=n(2);!function(e){e.ADD_TODOS_FROM_SERVER="ADD_TODOS_FROM_SERVER",e.SUCCES_ADD_TODO="SUCCES_ADD_TODO",e.ERROR_ADD_TODO="ERROR_ADD_TODO",e.FILTER_BY_NAME="FILTER_BY_NAME",e.SORT_TODO="SORT_TODO",e.SET_COMPLETE_STATUS="SET_COMPLETE_STATUS",e.SET_RANDOM="SET_RANDOM",e.DELETE_TODO="DELETE_TODO",e.SET_USER_ID="SET_USER_ID",e.ADD_USER="ADD_USER",e.IS_LOADING_ERROR="IS_LOADING_ERROR"}(r||(r={}));var _={todos:[],loading:!1,error:null,query:"",sortedTodos:[],completeStatus:"All",userId:0,user:null,isLoadingError:!1},p=Object(i.combineReducers)({todo:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:_,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case r.ADD_TODOS_FROM_SERVER:return Object(j.a)(Object(j.a)({},e),{},{loading:!0,error:null});case r.SUCCES_ADD_TODO:return Object(j.a)(Object(j.a)({},e),{},{loading:!1,error:null,todos:t.payload});case r.ERROR_ADD_TODO:return Object(j.a)(Object(j.a)({},e),{},{loading:!1,error:t.payload});case r.FILTER_BY_NAME:return Object(j.a)(Object(j.a)({},e),{},{query:t.payload});case r.SET_COMPLETE_STATUS:return Object(j.a)(Object(j.a)({},e),{},{completeStatus:t.payload});case r.SORT_TODO:return Object(j.a)(Object(j.a)({},e),{},{sortedTodos:t.payload.filter((function(t){switch(e.completeStatus){case"All":return t&&t.title.toLowerCase().includes(e.query);case"Complete":return t.completed&&t.title.toLowerCase().includes(e.query);case"notComplete":return!t.completed&&t.title.toLowerCase().includes(e.query);default:return 0}}))});case r.SET_RANDOM:return Object(j.a)(Object(j.a)({},e),{},{sortedTodos:t.payload.map((function(e){return{value:e,sort:Math.random()}})).sort((function(e,t){return e.sort-t.sort})).map((function(e){return e.value}))});case r.DELETE_TODO:return Object(j.a)(Object(j.a)({},e),{},{todos:e.sortedTodos.filter((function(e){return t.payload!==e.id}))});case r.SET_USER_ID:return Object(j.a)(Object(j.a)({},e),{},{userId:t.payload});case r.ADD_USER:return Object(j.a)(Object(j.a)({},e),{},{user:t.payload});case r.IS_LOADING_ERROR:return Object(j.a)(Object(j.a)({},e),{},{isLoadingError:t.payload});default:return e}}}),b=Object(i.legacy_createStore)(p,Object(d.composeWithDevTools)(Object(i.applyMiddleware)(O.a))),E=s.c,T=n(8),D=n(5),h=n.n(D),f=n(27),m=n.n(f);function R(e){return S.apply(this,arguments)}function S(){return(S=Object(T.a)(h.a.mark((function e(t){var n,r;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch(t);case 2:return n=e.sent,e.next=5,n.json();case 5:return r=e.sent,e.abrupt("return",r);case 7:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var y=function(){return function(){var e=Object(T.a)(h.a.mark((function e(t){var n;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,t({type:r.ADD_TODOS_FROM_SERVER}),e.next=4,m.a.get("https://mate.academy/students-api/todos");case 4:n=e.sent,t({type:r.SUCCES_ADD_TODO,payload:n.data}),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(0),t({type:r.ERROR_ADD_TODO,payload:"Can`t get data from server"});case 11:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(t){return e.apply(this,arguments)}}()},v=function(e){return{type:r.SORT_TODO,payload:e}},x=function(e){return{type:r.ADD_USER,payload:e}},A=function(e){return{type:r.IS_LOADING_ERROR,payload:e}},C=n(1),N=function(e){var t=e.selectUser,n=E((function(e){return e.todo})),c=n.error,a=n.loading,u=n.todos,i=n.query,d=n.completeStatus,O=n.sortedTodos,j=n.userId,_=Object(s.b)();Object(o.useEffect)((function(){_(y()),_(v(u))}),[]),Object(o.useEffect)((function(){_(v(u))}),[u,d,i]);return a?Object(C.jsx)("h1",{children:"Loading..."}):c?Object(C.jsx)("h1",{children:c}):Object(C.jsxs)("div",{className:"TodoList",children:[Object(C.jsx)("h2",{children:"Todos:"}),Object(C.jsxs)("label",{children:["Filter by name:",Object(C.jsx)("input",{type:"text",onChange:function(e){var t;_((t=e.target.value,{type:r.FILTER_BY_NAME,payload:t}))},value:i}),Object(C.jsxs)("select",{value:d,onChange:function(e){var t;_((t=e.target.value,{type:r.SET_COMPLETE_STATUS,payload:t}))},children:[Object(C.jsx)("option",{value:"All",children:"All"}),Object(C.jsx)("option",{value:"Complete",children:"Complete"}),Object(C.jsx)("option",{value:"notComplete",children:"notComplete"})]})]}),Object(C.jsx)("button",{type:"button",onClick:function(){var e;_((e=O,{type:r.SET_RANDOM,payload:e}))},children:"Random"}),Object(C.jsx)("div",{className:"TodoList__list-container",children:Object(C.jsx)("ul",{className:"TodoList__list",children:O.map((function(e){return Object(C.jsxs)("li",{className:l()("TodoList__item",{"TodoList__item--unchecked":!e.completed,"TodoList__item--checked":e.completed}),children:[Object(C.jsxs)("label",{children:[Object(C.jsx)("input",{type:"checkbox",checked:e.completed}),Object(C.jsx)("p",{children:e.title})]}),Object(C.jsxs)("div",{children:[Object(C.jsxs)("button",{className:l()("TodoList__user-button","button",{"TodoList__user-button--selected":e.userId===j}),type:"button",onClick:function(){t(e.userId)},children:["User\xa0#",e.userId?e.userId:"undefined"]}),Object(C.jsx)("button",{type:"button",className:"button",onClick:function(){return _((t=e.id,{type:r.DELETE_TODO,payload:t}));var t},children:"X"})]})]})}))})})]})},L=(n(64),function(e){var t=e.selectUser,n=Object(s.b)(),r=E((function(e){return e.todo})),c=r.user,a=r.userId,u=r.isLoadingError,l=Object(o.useCallback)(Object(T.a)(h.a.mark((function e(){var t,r;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t="https://mate.academy/students-api/users/".concat(a),e.prev=1,e.next=4,R(t);case 4:r=e.sent,n(A(!1)),n(x(r)),e.next=13;break;case 9:e.prev=9,e.t0=e.catch(1),n(x(null)),n(A(!0));case 13:case"end":return e.stop()}}),e,null,[[1,9]])}))),[a]);return Object(o.useEffect)((function(){l()}),[a]),Object(C.jsxs)(C.Fragment,{children:[c&&Object(C.jsxs)("div",{className:"CurrentUser",children:[Object(C.jsx)("h2",{className:"CurrentUser__title",children:Object(C.jsxs)("span",{children:["Selected user:",a]})}),Object(C.jsx)("h3",{className:"CurrentUser__name",children:null===c||void 0===c?void 0:c.name}),Object(C.jsx)("p",{className:"CurrentUser__email",children:null===c||void 0===c?void 0:c.email}),Object(C.jsx)("p",{className:"CurrentUser__phone",children:null===c||void 0===c?void 0:c.phone}),Object(C.jsx)("button",{type:"button",className:"button",onClick:function(){t(0)},children:"Clear"})]}),u&&Object(C.jsx)("div",{className:"CurrentUser",children:Object(C.jsx)("h3",{className:"CurrentUser__name",children:"No user info"})})]})}),U=function(){var e=Object(s.b)(),t=E((function(e){return e.todo.userId}));Object(o.useEffect)((function(){e(y())}),[]);var n=function(t){var n;e((n=t,{type:r.SET_USER_ID,payload:n}))};return Object(C.jsxs)("div",{className:"App",children:[Object(C.jsx)("div",{className:"App__sidebar",children:Object(C.jsx)(N,{selectUser:n})}),Object(C.jsx)("div",{className:"App__content",children:Object(C.jsx)("div",{className:"App__content-container",children:t?Object(C.jsx)(L,{selectUser:n}):"No user selected"})})]})},I=function(){return Object(C.jsx)(s.a,{store:b,children:Object(C.jsx)(U,{})})};a.a.render(Object(C.jsx)(I,{}),document.getElementById("root"))}},[[65,1,2]]]);
//# sourceMappingURL=main.15614015.chunk.js.map